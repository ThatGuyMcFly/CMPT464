/**
 * main.c
 */

#include "timer_module.h"
#include "uart_module.h"
#include "driverlib/aon_batmon.h"

void convert_to_char(uint32_t data, char * characters) {

    int digit_1 = data / 10;
    int digit_2 = data - digit_1 * 10;

    char character1 = '0' + digit_1;
    char character2 = '0' + digit_2;

    characters[0] = character1;
    characters[1] = character2;
}

void timerCallback() {
    uint32_t temperature = AONBatMonTemperatureGetDegC();

    char characters[] = "   C\n\r";

    convert_to_char(temperature, characters);

    uart_send_data(temperature);
}

int main(void) {
    AONBatMonEnable();
    uart_setup(9600);
    timer_setup(&timerCallback, 5000);
    PRCMSleep();
	return 0;
}
